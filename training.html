<!DOCTYPE html>

	<head>
    <meta charset="utf-8">
    <title>
        Training
    </title>
    <meta name="description" content="the running log of Samay Shamdasani">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="Training ">
    <meta property="og:description" content="the running log of Samay Shamdasani">
    <meta property="og:image" content="https://lh3.googleusercontent.com/eOcMcsKNoQwZozlcocm57Z36WLA_HucSoIq4OUpjBOwb37NUcgYztHFQl3k9PcUAyHLHUphASGFWw36Wemwy4zmAcGdeeM3dhQg6Fc-sLTyceVh6A41iD5Zqx-ICKTIp0fhTlSIwo37TtOiF2zobd_8BC0uZHUmaIcTDIe_sS-Tjbd0fzb8pJFyJGdXqqzltuRVmFiDBmuCndIqDgzWBGPeApktaRBGpaZ1Q1ldUjNL3_FApIoI8bJO8zwNC31-Hq8MCZBPQgTWLkPrB4PZQAQau-upb3GfrnQjUoi9NvrO8h5qiupX1cE21KoX3N8sJDVtcAE3HTFOZSBZnUxOGRvq0JZPXotk-i1U9hXGuGqPYK6KE8UGl3C1zUT17G_T0ao0w7Y2L_raf6huyh5OlWtGkxWkdKdIZP-7s8UL2tS2AJst8fWakysWXmx1N1pCoAR_4L0fFYVPwVS2fLf8kpWgi9Hp5WKnl5_5fkNyGk_KxEGLjMzWXj_rSK-PJWi-Hpb_lKj0UqSpQ-pd1dxRFSaxovLysCWa8KBbvlTS9Zt3x3ggPtUGMmjE-aHET2qMxrHOnmK3NRykln0rPlLTAmkMseGOs39YXDpSEFdE0O0PjUms=s807-no">
    <meta property="og:url" content="/training.html">
    <meta name="twitter:card" content="summary">
    <meta property="twitter:image" content="https://lh3.googleusercontent.com/eOcMcsKNoQwZozlcocm57Z36WLA_HucSoIq4OUpjBOwb37NUcgYztHFQl3k9PcUAyHLHUphASGFWw36Wemwy4zmAcGdeeM3dhQg6Fc-sLTyceVh6A41iD5Zqx-ICKTIp0fhTlSIwo37TtOiF2zobd_8BC0uZHUmaIcTDIe_sS-Tjbd0fzb8pJFyJGdXqqzltuRVmFiDBmuCndIqDgzWBGPeApktaRBGpaZ1Q1ldUjNL3_FApIoI8bJO8zwNC31-Hq8MCZBPQgTWLkPrB4PZQAQau-upb3GfrnQjUoi9NvrO8h5qiupX1cE21KoX3N8sJDVtcAE3HTFOZSBZnUxOGRvq0JZPXotk-i1U9hXGuGqPYK6KE8UGl3C1zUT17G_T0ao0w7Y2L_raf6huyh5OlWtGkxWkdKdIZP-7s8UL2tS2AJst8fWakysWXmx1N1pCoAR_4L0fFYVPwVS2fLf8kpWgi9Hp5WKnl5_5fkNyGk_KxEGLjMzWXj_rSK-PJWi-Hpb_lKj0UqSpQ-pd1dxRFSaxovLysCWa8KBbvlTS9Zt3x3ggPtUGMmjE-aHET2qMxrHOnmK3NRykln0rPlLTAmkMseGOs39YXDpSEFdE0O0PjUms=s807-no">
    <meta name="twitter:site" content="@shamdasanii">
    <meta name="twitter:title" content="Training">
    <meta name="twitter:description" content="the running log of Samay Shamdasani">
    <meta name="twitter:creator" content="@shamdasanii">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tachyons/4.8.1/tachyons.css">
    <script src="//twemoji.maxcdn.com/2/twemoji.min.js?2.3.0"></script>
    <script>
		  ;(function(i, s, o, g, r, a, m) {
  i['GoogleAnalyticsObject'] = r
  ;(i[r] =
    i[r] ||
    function() {
      ;(i[r].q = i[r].q || []).push(arguments)
    }),
    (i[r].l = 1 * new Date())
  ;(a = s.createElement(o)), (m = s.getElementsByTagName(o)[0])
  a.async = 1
  a.src = g
  m.parentNode.insertBefore(a, m)
})(
  window,
  document,
  'script',
  'https://www.google-analytics.com/analytics.js',
  'ga'
)

ga('create', 'UA-81826963-1', 'auto')
ga('send', 'pageview')
</script>
</head>

	<body>
	<header class="sans-serif">
    <div class="center pa6 pt5-ns ph7-l" style="background:url(run.jpg) no-repeat center; background-size: cover;">
      <h3 class="f2 f1-m f-headline-l measure-narrow mv0 tc">
        <span class="lh-copy bg-red white pa1 tracked-tight">
          Training
        </span>
      </h3>
    </div>
  </header>

<div class="center sans-serif ph4 f4 pv5 lh-copy ph2 runs w-100">
	<div id="runs" class="fl w-50"></div>
</div>

<script>
const url =
  'https://www.strava.com/api/v3/athlete/activities?per_page=200&access_token=30d09c05a25820cfd4a7c04a7eb9a5c813b4dccb'

function getStravaActivities(callback) {
  var request = new XMLHttpRequest()
  request.onreadystatechange = function() {
    if (request.status >= 200 && request.status < 400) {
      console.log('Strava Runs Retrieved')
      callback(JSON.parse(request.responseText))
    } else {
      console.log('error')
    }
  }
  request.open('GET', url, true)
  request.send()
}

function loadStravaActivities(data) {
  for (var i in data) {
    var activity = data[i]

    var name = activity.name
    var date = activity.start_date
    var distance = activity.distance
    var seconds = activity.moving_time
    var elevation = activity.total_elevation_gain
    var max_elevation = activity.elev_high
    var pace

    // var last_activity = i - 1;

    // if (date === data[las].start_date) {
    // 	console.log("SAME DATE")
    // }

    function formatDate(date) {
      date = new Date(date).toString().slice(0, 15)
      return date
    }
    function metersToFeet(elevation) {
      var feet = Math.round(elevation * 3.28084 * 100) / 100
      return feet
    }
    function metersToMiles(distance) {
      var miles = Math.round(distance * 0.000621371 * 100) / 100
      return miles
    }
    var miles = metersToMiles(distance)
    function secondsToTime(seconds) {
      var hours = parseInt(seconds / 3600) % 24
      if (hours < 10) {
        hours = '0' + hours
      }
      var minutes = parseInt(seconds / 60) % 60
      if (minutes < 10) {
        mintes = '0' + minutes
      }
      var seconds = seconds % 60
      if (seconds < 10) {
        seconds = '0' + seconds
      }
      return hours + ':' + minutes + ':' + seconds
    }
    function secondsToPace(seconds, miles) {
      var secondsPerMile = Math.round(seconds / miles * 1) / 1
      var pace = Math.floor(secondsPerMile / 60)
      var secondsLeft = secondsPerMile % 60
      var responseString = pace.toString() + ':' + secondsLeft.toString()
      if (secondsLeft < 10) {
        responseString = pace.toString() + ':0' + secondsLeft.toString()
      }
      return responseString
    }

    date = formatDate(date)
    distance = metersToMiles(distance)
    elevation = metersToFeet(elevation)
    max_elevation = metersToFeet(max_elevation)
    time = secondsToTime(seconds)
    pace = secondsToPace(seconds, miles)

    // console.log("Name: " + name);
    // console.log("Date: " + date);
    // console.log("Distance: " + distance);
    // console.log("Time: " + time);
    // console.log("Elevation Gain: " + elevation);

    var str =
      '<b>' +
      name +
      '</b>' +
      '<br>' +
      'Date: ' +
      date +
      '<br>' +
      'Distance: ' +
      distance +
      ' miles' +
      '<br>' +
      'Moving Time: ' +
      time +
      '<br>' +
      'Pace: ' +
      pace +
      ' / mi <br>' +
      'Elevation Gain: ' +
      elevation +
      ' ft. <br>' +
      'Max Elevation: ' +
      max_elevation +
      ' ft.' +
      '<br><br>'
    document.getElementById('runs').innerHTML += str
  }
}

getStravaActivities(loadStravaActivities)
</script>


		<section class="pa3 pa4-m pa5-l tc sans-serif" style="background:#0f1919" >
    <a class="f3 link b hover-light-red no-underline dib ph2 pv1 white" href="http://github.com/shamdasani">github</a>
    <a class="f3 link b hover-pink no-underline dib ph2 pv1 white" href="http://instagram.com/shamdasanii">instagram</a>
    <a class="f3 link b hover-blue no-underline dib ph2 pv1 white" href="http://twitter.com/shamdasanii">twitter</a><br>
        <a class="f3 link b hover-yellow no-underline dib ph2 pv1 white" href="mailto:hi@shamdasani.org">hi@shamdasani.org</a>
  </section>


	</body>
</html>
